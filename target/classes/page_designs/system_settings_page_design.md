# 系统设置页面详细设计

## 1. 网站基本信息设置页

### 1.1 页面布局
- **顶部区域**：
  - 页面标题："网站基本信息设置"
  - 操作按钮：
    - 【保存设置】- 保存当前页面的所有设置
    - 【重置】- 重置当前页面的设置为默认值
    - 【刷新】- 刷新当前页面的设置数据

- **设置分组区域**：
  - **基础信息**：
    - 网站名称、网站Logo、网站域名、版权信息
  - **联系信息**：
    - 联系邮箱、联系电话、公司地址
  - **SEO设置**：
    - SEO标题、SEO关键词、SEO描述

- **表单元素**：
  - 每个设置项包含：设置名称、输入控件、描述信息、必填标识
  - 根据设置类型显示不同的输入控件（文本框、数字框、开关、文本域、上传组件）

### 1.2 表单设计
| 分组名称 | 字段名称 | 字段类型 | 必填 | 说明 |
|----------|----------|----------|------|------|
| **基础信息** | 网站名称 | 文本框 | 是 | 网站的中文名称 |
| **基础信息** | 网站Logo | 上传组件 | 是 | 网站的Logo图片URL |
| **基础信息** | 网站域名 | 文本框 | 是 | 网站的访问域名 |
| **基础信息** | 版权信息 | 文本框 | 是 | 网站的版权信息 |
| **联系信息** | 联系邮箱 | 文本框 | 是 | 网站的联系邮箱 |
| **联系信息** | 联系电话 | 文本框 | 是 | 网站的联系电话 |
| **联系信息** | 公司地址 | 文本框 | 否 | 公司的详细地址 |
| **SEO设置** | SEO标题 | 文本框 | 否 | 网站的SEO标题 |
| **SEO设置** | SEO关键词 | 文本框 | 否 | 网站的SEO关键词，用逗号分隔 |
| **SEO设置** | SEO描述 | 文本域 | 否 | 网站的SEO描述 |

### 1.3 交互设计
- 点击【保存设置】按钮，保存当前页面的所有设置，显示保存成功提示
- 点击【重置】按钮，弹出确认对话框，重置当前页面的设置为默认值
- 点击【刷新】按钮，重新加载当前页面的设置数据
- 网站Logo上传支持拖拽上传和点击上传，限制图片大小和格式
- 输入框失去焦点时，自动验证输入内容的合法性
- 必填字段为空时，提交表单时显示错误提示
- 支持设置项的展开/折叠

## 2. 通知设置页

### 2.1 页面布局
- **顶部区域**：
  - 页面标题："通知设置"
  - 操作按钮：
    - 【发送通知】- 打开发送通知弹窗
    - 【刷新列表】- 刷新当前通知列表
    - 【批量删除】- 批量删除选中的通知
    - 【标记全部已读】- 标记所有通知为已读

- **筛选区域**：
  - 通知标题输入框
  - 消息类型筛选（全部/系统通知/订单通知/活动通知/其他）
  - 发送者名称输入框
  - 接收者类型筛选（全部/全体用户/特定用户/特定角色）
  - 状态筛选（全部/未读/已读）
  - 时间范围选择器
  - 【查询】按钮
  - 【重置】按钮

- **表格区域**：
  - 复选框列（支持全选/取消全选）
  - 序号列
  - ID列
  - 标题列（显示标题，重要通知标红）
  - 消息类型列
  - 发送者名称列
  - 接收者类型列
  - 状态列（未读/已读）
  - 重要程度列（普通/重要）
  - 创建时间列
  - 操作列：【查看详情】【标记已读/未读】【删除】

- **分页区域**：
  - 总记录数显示
  - 每页条数选择
  - 页码跳转
  - 上一页/下一页按钮

### 2.2 表单设计（发送通知）
| 字段名称 | 字段类型 | 必填 | 说明 |
|----------|----------|------|------|
| 通知标题 | 文本框 | 是 | 通知的标题 |
| 通知内容 | 富文本编辑器 | 是 | 通知的内容 |
| 消息类型 | 下拉选择 | 是 | 消息类型：1-系统通知, 2-订单通知, 3-活动通知, 4-其他 |
| 接收者类型 | 下拉选择 | 是 | 接收者类型：0-全体用户, 1-特定用户, 2-特定角色 |
| 特定用户 | 多选框/搜索选择 | 否 | 当接收者类型为特定用户时必填 |
| 特定角色 | 多选框/搜索选择 | 否 | 当接收者类型为特定角色时必填 |
| 是否重要 | 开关 | 否 | 标记通知是否重要 |
| 有效期 | 日期时间选择器 | 否 | 通知的有效期，超过有效期自动失效 |

### 2.3 通知详情弹窗设计
- **标题**：通知详情
- **内容**：
  - 基本信息：标题、消息类型、发送者、接收者类型、创建时间、状态、重要程度
  - 通知内容：富文本展示
  - 阅读情况：已读人数/总接收人数
- **操作按钮**：【关闭】

### 2.4 交互设计
- 点击【发送通知】按钮，弹出发送通知弹窗
- 点击【查看详情】按钮，弹出通知详情弹窗
- 点击【标记已读/未读】按钮，切换通知的阅读状态
- 点击【删除】按钮，弹出确认删除对话框
- 点击【标记全部已读】按钮，将所有未读通知标记为已读
- 支持表格列排序（ID、创建时间）
- 支持表格列筛选
- 重要通知在标题前显示红色标记
- 未读通知在状态列显示红色"未读"标识
- 发送通知时，根据接收者类型动态显示/隐藏对应的接收者选择控件

## 3. 数据模型关联

### 3.1 网站基本信息设置页
- 关联表：`sys_settings`
- 数据来源：`sys_settings`
- 数据分组：通过`group_name`字段区分不同分组的设置

### 3.2 通知设置页
- 关联表：`sys_messages`
- 数据来源：`sys_messages`
- 关联查询：可关联`sys_users`表获取发送者和接收者的详细信息

## 4. 技术实现建议

### 4.1 前端实现
- 使用React/Vue框架
- 采用Ant Design/Element UI组件库
- 使用表单组件实现设置项的输入和验证
- 使用表格组件实现通知的列表展示
- 使用模态框组件实现新增/编辑/详情展示
- 使用开关组件实现状态切换
- 使用上传组件实现图片上传
- 使用富文本编辑器实现通知内容编辑
- 使用日期时间选择器实现时间范围选择
- 实现设置项的分组展示和展开/折叠

### 4.2 后端实现
- 提供设置项的查询、保存API
- 实现通知的发送和管理API
- 支持设置项的分组查询
- 实现设置项的验证和权限控制
- 考虑使用缓存机制提高设置项的查询性能

### 4.3 数据库设计扩展建议
- 设计通用的配置项表，支持不同类型的配置
- 实现配置项的版本管理，支持回滚

### 4.4 安全考虑
- 设置项的修改需要权限控制
- 通知内容需要进行XSS过滤
- 防止恶意发送大量通知

## 5. 扩展建议

### 5.1 功能扩展
- 支持设置项的导入/导出
- 实现设置项的历史记录和版本管理
- 支持通知的定时发送
- 实现通知的推送功能（邮件/短信/站内信）

### 5.2 用户体验优化
- 提供设置项的搜索功能
- 实现设置项的批量修改
- 支持通知的已读/未读状态切换
- 实现设置项的实时预览

### 5.3 性能优化
- 实现设置项的缓存机制
- 对通知进行分页加载

## 6. 页面间关系

```
┌─────────────────────┐     ┌─────────────────────┐
│ 网站基本信息设置页 │     │ 通知设置页         │
└─────────────────────┘     └─────────────────────┘
        ▲                             ▲
        │                             │
        └─────────────────────────────┘
```

- 两个页面均属于系统设置模块，可通过左侧菜单访问
- 每个页面独立完成特定的设置功能

## 7. 设计亮点

### 7.1 模块化设计
- 系统设置模块分为两个独立的页面，每个页面负责特定的设置功能
- 页面结构清晰，便于用户理解和操作

### 7.2 动态表单
- 根据设置类型动态加载不同的输入控件
- 根据接收者类型动态显示/隐藏对应的接收者选择控件

### 7.3 良好的用户体验
- 支持设置项的分组展示和展开/折叠
- 提供实时预览功能
- 支持批量操作，提高管理效率
- 重要通知和未读通知有明显的视觉标识

### 7.4 可扩展性
- 设计通用的配置页面，便于后续扩展新的配置项
- 支持动态添加配置参数

### 7.5 安全性
- 设置项的修改需要权限控制
- 通知内容进行XSS过滤

## 8. 总结

系统设置模块是电商后台管理系统中的重要组成部分，用于管理网站的基本信息和通知。本设计方案根据数据库表结构，详细设计了两个页面的布局、表单、表格和交互逻辑，同时考虑了性能优化和安全性。

该设计方案具有良好的用户体验、清晰的信息展示和强大的功能支持，能够满足电商后台管理系统对系统设置的需求。同时，该设计方案具有良好的可扩展性，便于后续功能扩展和系统集成。