# 订单管理页面设计

## 1. 订单列表查询页面

### 1.1 页面概述
- **页面URL**: `/admin/order/list`
- **功能描述**: 用于查询订单列表，支持按状态、时间、用户等条件筛选

### 1.2 页面布局
- **顶部筛选区**: 订单状态、时间范围、用户信息、订单编号等筛选条件
- **中部操作区**: 新增订单按钮、批量操作按钮组（批量发货、批量取消、批量导出）
- **底部列表区**: 订单信息表格，支持分页、排序

### 1.3 筛选表单设计
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 订单编号 | 输入框 | 否 | 按订单编号模糊搜索 | order_orders.order_no |
| 客户名称 | 输入框 | 否 | 按客户名称模糊搜索 | order_orders.customer_name |
| 订单状态 | 多选框 | 否 | 订单状态筛选：0-待付款, 1-待发货, 2-待收货, 3-已完成, 4-已取消, 5-已退款, 6-已退货 | order_orders.order_status |
| 支付状态 | 多选框 | 否 | 支付状态筛选：0-未支付, 1-已支付, 2-支付失败 | order_orders.pay_status |
| 支付方式 | 多选框 | 否 | 支付方式筛选：1-支付宝, 2-微信支付, 3-银行卡 | order_orders.pay_type |
| 创建时间 | 日期范围选择器 | 否 | 按订单创建时间筛选 | order_orders.created_at |
| 支付时间 | 日期范围选择器 | 否 | 按订单支付时间筛选 | order_orders.pay_time |
| 收货人 | 输入框 | 否 | 按收货人姓名模糊搜索 | order_orders.consignee |

### 1.4 表格设计
| 列名 | 类型 | 操作 | 关联字段 |
|------|------|------|----------|
| 复选框 | 选择框 | 批量操作 | 无 |
| 订单编号 | 文本 | 点击查看详情 | order_orders.order_no |
| 客户名称 | 文本 | 无 | order_orders.customer_name |
| 订单金额 | 文本 | 无 | order_orders.actual_amount |
| 订单状态 | 标签 | 无 | order_orders.order_status |
| 支付状态 | 标签 | 无 | order_orders.pay_status |
| 支付方式 | 文本 | 无 | order_orders.pay_type |
| 下单时间 | 时间 | 无 | order_orders.created_at |
| 支付时间 | 时间 | 无 | order_orders.pay_time |
| 收货人 | 文本 | 无 | order_orders.consignee |
| 操作 | 按钮组 | 查看详情、处理订单 | 无 |

### 1.5 交互设计
- 筛选条件支持实时搜索
- 支持按多条件组合筛选
- 支持表格列的拖拽排序和显示隐藏
- 支持表格数据的导出
- 点击订单编号跳转到订单详情页面
- 支持批量选择订单进行批量操作

## 2. 订单详情查看页面

### 2.1 页面概述
- **页面URL**: `/admin/order/detail/:orderId`
- **功能描述**: 用于查看订单的详细信息，包括订单基本信息、订单商品、物流信息和状态历史

### 2.2 页面布局
- **顶部操作区**: 返回按钮、订单操作按钮（发货、取消、退款、退货）
- **订单基本信息区**: 订单编号、客户信息、订单金额、订单状态等
- **订单商品区**: 表格展示订单商品详情
- **物流信息区**: 物流状态、物流公司、物流单号、收货人信息等
- **状态历史区**: 时间线展示订单状态变更历史

### 2.3 订单基本信息表单
| 字段名 | 类型 | 说明 | 关联字段 |
|-------|------|------|----------|
| 订单编号 | 文本 | 订单唯一标识 | order_orders.order_no |
| 客户ID | 文本 | 客户唯一标识 | order_orders.customer_id |
| 客户名称 | 文本 | 客户姓名 | order_orders.customer_name |
| 订单总金额 | 文本 | 订单商品总价 | order_orders.total_amount |
| 实际支付金额 | 文本 | 客户实际支付金额 | order_orders.actual_amount |
| 优惠金额 | 文本 | 订单优惠金额 | order_orders.discount_amount |
| 运费 | 文本 | 订单运费 | order_orders.shipping_amount |
| 订单状态 | 标签 | 订单当前状态 | order_orders.order_status |
| 支付状态 | 标签 | 订单支付状态 | order_orders.pay_status |
| 支付方式 | 文本 | 订单支付方式 | order_orders.pay_type |
| 支付时间 | 时间 | 订单支付时间 | order_orders.pay_time |
| 订单备注 | 文本 | 订单备注信息 | order_orders.remark |
| 创建时间 | 时间 | 订单创建时间 | order_orders.created_at |
| 更新时间 | 时间 | 订单最后更新时间 | order_orders.updated_at |

### 2.4 订单商品表格设计
| 列名 | 类型 | 说明 | 关联字段 |
|------|------|------|----------|
| 商品图片 | 图片 | 商品缩略图 | order_items.image_url |
| 商品名称 | 文本 | 商品名称 | order_items.product_name |
| 商品编码 | 文本 | 商品编码 | order_items.product_code |
| SKU名称 | 文本 | SKU名称 | order_items.sku_name |
| SKU编码 | 文本 | SKU编码 | order_items.sku_code |
| 单价 | 文本 | 商品单价 | order_items.price |
| 数量 | 数字 | 购买数量 | order_items.quantity |
| 总价 | 文本 | 商品总价 | order_items.total_price |

### 2.5 物流信息表单
| 字段名 | 类型 | 说明 | 关联字段 |
|-------|------|------|----------|
| 物流公司 | 文本 | 物流公司名称 | order_logistics.shipping_name |
| 物流单号 | 文本 | 物流单号 | order_logistics.shipping_no |
| 物流状态 | 标签 | 物流当前状态 | order_logistics.logistics_status |
| 收货人 | 文本 | 收货人姓名 | order_logistics.consignee |
| 联系电话 | 文本 | 收货人电话 | order_logistics.phone |
| 收货地址 | 文本 | 详细收货地址 | order_logistics.province, order_logistics.city, order_logistics.district, order_logistics.address |
| 发货时间 | 时间 | 商品发货时间 | order_logistics.ship_time |
| 配送时间 | 时间 | 商品配送时间 | order_logistics.delivery_time |
| 签收时间 | 时间 | 商品签收时间 | order_logistics.sign_time |

### 2.6 状态历史时间线
| 字段名 | 类型 | 说明 | 关联字段 |
|-------|------|------|----------|
| 状态时间 | 时间 | 状态变更时间 | order_status_history.created_at |
| 状态名称 | 文本 | 订单状态名称 | order_status_history.status_name |
| 操作人 | 文本 | 状态变更操作人 | order_status_history.operated_by |
| 备注 | 文本 | 状态变更备注 | order_status_history.remark |

### 2.7 交互设计
- 支持返回订单列表页面
- 支持在详情页面直接进行订单操作
- 物流信息支持点击物流单号跳转到物流公司官网查询
- 状态历史按时间倒序排列
- 支持查看订单商品的详细信息

## 3. 订单处理页面

### 3.1 页面概述
- **页面URL**: `/admin/order/process/:orderId`
- **功能描述**: 用于处理订单，包括发货、取消、退款、退货等操作

### 3.2 页面布局
- **顶部操作区**: 返回按钮、保存按钮
- **订单信息概览区**: 显示订单编号、客户名称、订单状态等关键信息
- **操作表单区**: 根据订单当前状态显示不同的操作表单

### 3.3 发货操作表单
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 物流公司 | 下拉选择框 | 是 | 选择物流公司 | order_logistics.shipping_name |
| 物流单号 | 输入框 | 是 | 输入物流单号 | order_logistics.shipping_no |
| 发货备注 | 文本域 | 否 | 填写发货备注 | order_status_history.remark |

### 3.4 取消订单表单
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 取消原因 | 下拉选择框 | 是 | 选择取消原因 | order_status_history.remark |
| 详细备注 | 文本域 | 否 | 填写详细取消原因 | order_status_history.remark |

### 3.5 退款操作表单
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 退款金额 | 数字输入框 | 是 | 输入退款金额 | order_orders.actual_amount |
| 退款原因 | 下拉选择框 | 是 | 选择退款原因 | order_status_history.remark |
| 退款说明 | 文本域 | 否 | 填写详细退款说明 | order_status_history.remark |
| 退款凭证 | 上传组件 | 否 | 上传退款凭证图片 | 无 |

### 3.6 退货操作表单
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 退货商品 | 表格选择 | 是 | 选择要退货的商品 | order_items |
| 退货数量 | 数字输入框 | 是 | 输入退货数量 | 无 |
| 退货原因 | 下拉选择框 | 是 | 选择退货原因 | order_status_history.remark |
| 退货说明 | 文本域 | 否 | 填写详细退货说明 | order_status_history.remark |
| 退货凭证 | 上传组件 | 否 | 上传退货凭证图片 | 无 |
| 退款金额 | 数字输入框 | 是 | 输入退款金额 | order_orders.actual_amount |

### 3.7 交互设计
- 根据订单当前状态动态显示可执行的操作表单
- 表单验证实时反馈
- 操作成功后自动更新订单状态和状态历史
- 支持返回订单详情页面
- 操作前显示确认弹窗

## 4. 订单批量操作页面

### 4.1 页面概述
- **页面URL**: `/admin/order/batch`
- **功能描述**: 用于批量处理订单，包括批量发货、批量取消、批量退款等

### 4.2 页面布局
- **顶部操作区**: 返回按钮、批量操作类型选择
- **订单选择区**: 表格展示可选择的订单，支持按条件筛选
- **操作表单区**: 根据选择的批量操作类型显示不同的操作表单

### 4.3 批量发货表单
| 字段名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| 物流公司 | 下拉选择框 | 是 | 选择物流公司 |
| 物流单号 | 输入框 | 是 | 输入物流单号（支持批量导入） |
| 发货备注 | 文本域 | 否 | 填写发货备注 |

### 4.4 批量取消表单
| 字段名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| 取消原因 | 下拉选择框 | 是 | 选择取消原因 |
| 详细备注 | 文本域 | 否 | 填写详细取消原因 |

### 4.5 批量退款表单
| 字段名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| 退款金额 | 数字输入框 | 是 | 输入退款金额 |
| 退款原因 | 下拉选择框 | 是 | 选择退款原因 |
| 退款说明 | 文本域 | 否 | 填写详细退款说明 |

### 4.6 交互设计
- 支持选择批量操作类型
- 支持按条件筛选要操作的订单
- 支持表格多选订单
- 表单验证实时反馈
- 批量操作结果实时反馈
- 支持批量操作记录查询

## 5. 订单导出页面

### 5.1 页面概述
- **页面URL**: `/admin/order/export`
- **功能描述**: 用于导出订单数据，支持自定义导出字段和条件

### 5.2 页面布局
- **顶部操作区**: 返回按钮、导出按钮
- **导出条件区**: 订单状态、时间范围、用户信息等筛选条件
- **导出字段选择区**: 多选框选择要导出的字段
- **导出模板选择区**: 选择导出模板类型

### 5.3 导出条件表单
| 字段名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| 订单状态 | 多选框 | 否 | 选择要导出的订单状态 |
| 时间范围 | 日期范围选择器 | 否 | 选择要导出的订单时间范围 |
| 客户名称 | 输入框 | 否 | 按客户名称筛选 |
| 订单编号 | 输入框 | 否 | 按订单编号筛选 |

### 5.4 导出字段选择
| 字段名 | 类型 | 说明 | 关联字段 |
|-------|------|------|----------|
| 订单编号 | 复选框 | 导出订单编号 | order_orders.order_no |
| 客户名称 | 复选框 | 导出客户名称 | order_orders.customer_name |
| 订单金额 | 复选框 | 导出订单金额 | order_orders.actual_amount |
| 订单状态 | 复选框 | 导出订单状态 | order_orders.order_status |
| 支付方式 | 复选框 | 导出支付方式 | order_orders.pay_type |
| 下单时间 | 复选框 | 导出下单时间 | order_orders.created_at |
| 支付时间 | 复选框 | 导出支付时间 | order_orders.pay_time |
| 收货人 | 复选框 | 导出收货人 | order_orders.consignee |
| 收货地址 | 复选框 | 导出收货地址 | order_orders.address |

### 5.5 交互设计
- 支持自定义选择导出字段
- 支持选择导出模板类型
- 支持按条件筛选导出数据
- 导出文件支持Excel、CSV等格式
- 导出进度实时显示
- 支持导出历史记录查询

## 6. 物流信息管理页面

### 6.1 页面概述
- **页面URL**: `/admin/order/logistics`
- **功能描述**: 用于查询和更新物流信息

### 6.2 页面布局
- **顶部搜索区**: 订单编号、物流单号、客户名称等搜索条件
- **中部操作区**: 批量更新物流信息按钮
- **底部列表区**: 物流信息表格，支持分页、排序

### 6.3 搜索表单设计
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 订单编号 | 输入框 | 否 | 按订单编号搜索 | order_orders.order_no |
| 物流单号 | 输入框 | 否 | 按物流单号搜索 | order_logistics.shipping_no |
| 客户名称 | 输入框 | 否 | 按客户名称搜索 | order_orders.customer_name |
| 物流状态 | 多选框 | 否 | 按物流状态筛选 | order_logistics.logistics_status |
| 时间范围 | 日期范围选择器 | 否 | 按发货时间筛选 | order_logistics.ship_time |

### 6.4 表格设计
| 列名 | 类型 | 操作 | 关联字段 |
|------|------|------|----------|
| 复选框 | 选择框 | 批量操作 | 无 |
| 订单编号 | 文本 | 点击查看订单详情 | order_orders.order_no |
| 客户名称 | 文本 | 无 | order_orders.customer_name |
| 物流公司 | 文本 | 无 | order_logistics.shipping_name |
| 物流单号 | 文本 | 点击查询物流详情 | order_logistics.shipping_no |
| 物流状态 | 标签 | 无 | order_logistics.logistics_status |
| 收货人 | 文本 | 无 | order_logistics.consignee |
| 发货时间 | 时间 | 无 | order_logistics.ship_time |
| 签收时间 | 时间 | 无 | order_logistics.sign_time |
| 操作 | 按钮组 | 编辑物流信息、查询物流详情 | 无 |

### 6.5 物流信息编辑表单
| 字段名 | 类型 | 必填 | 说明 | 关联字段 |
|-------|------|------|------|----------|
| 物流公司 | 下拉选择框 | 是 | 选择物流公司 | order_logistics.shipping_name |
| 物流单号 | 输入框 | 是 | 输入物流单号 | order_logistics.shipping_no |
| 物流状态 | 下拉选择框 | 是 | 选择物流状态 | order_logistics.logistics_status |
| 收货人 | 输入框 | 是 | 输入收货人姓名 | order_logistics.consignee |
| 联系电话 | 输入框 | 是 | 输入收货人电话 | order_logistics.phone |
| 收货地址 | 文本域 | 是 | 输入详细收货地址 | order_logistics.address |
| 发货时间 | 时间选择器 | 否 | 选择发货时间 | order_logistics.ship_time |
| 配送时间 | 时间选择器 | 否 | 选择配送时间 | order_logistics.delivery_time |
| 签收时间 | 时间选择器 | 否 | 选择签收时间 | order_logistics.sign_time |

### 6.6 交互设计
- 支持按条件搜索物流信息
- 支持批量更新物流信息
- 点击物流单号可查询物流详情
- 支持编辑物流信息
- 编辑后自动更新订单状态
- 支持物流信息的导入导出

## 7. 通用设计规范

### 7.1 样式规范
- 使用Ant Design/Element UI组件库
- 统一的颜色主题和字体
- 响应式布局，适配不同屏幕尺寸
- 订单状态使用不同颜色的标签标识：
  - 待付款：橙色
  - 待发货：蓝色
  - 待收货：绿色
  - 已完成：灰色
  - 已取消：红色
  - 已退款：紫色
  - 已退货：深红色

### 7.2 交互规范
- 表单验证实时反馈
- 操作成功/失败提示
- 确认弹窗（删除、批量操作等）
- 加载状态提示
- 支持键盘快捷键操作

### 7.3 数据规范
- 所有数据操作都需记录操作日志
- 支持数据的逻辑删除
- 支持数据的导入导出
- 支持数据的批量操作

## 8. 技术实现建议

### 8.1 前端技术栈
- React/Vue
- Ant Design/Element UI
- Axios
- React Router/Vue Router
- Day.js（时间处理）
- xlsx（Excel导出）

### 8.2 后端技术栈
- Spring Boot
- MyBatis-Plus
- MySQL
- Redis
- RabbitMQ（异步处理订单）

### 8.3 性能优化
- 订单列表使用分页加载
- 订单详情使用缓存
- 批量操作异步处理
- 物流信息查询接口优化

### 8.4 安全考虑
- API接口权限控制
- 敏感数据加密传输
- 防止SQL注入
- 防止XSS攻击

## 9. 后续迭代建议

### 9.1 功能扩展
- 订单智能分析报表
- 订单预警功能
- 订单自动处理规则
- 订单评价管理

### 9.2 体验优化
- 订单操作流程优化
- 物流信息实时推送
- 移动端订单管理
- 订单打印功能

### 9.3 技术升级
- 微服务架构拆分
- 分布式缓存
- 消息队列异步处理
- 容器化部署

## 10. 总结

订单管理模块是电商系统的核心模块之一，包含订单列表查询、订单详情查看、订单处理、订单批量操作、订单导出和物流信息管理六个主要页面。本设计方案基于MySQL数据库表结构，结合了现代前端技术和最佳实践，实现了订单全生命周期的管理。

设计方案考虑了用户体验、性能优化和安全考虑，并提供了后续迭代建议，为电商系统的订单管理功能提供了完整的解决方案。